<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cardano.Node.Query</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cardano-node-1.24.2</span><ul class="links" id="page-menu"><li><a href="src/Cardano.Node.Query.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.Node.Query</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Answer queries using the ledger state of the running node</p><p>This allows queries from within the running node as opposed to submitting
 queries via the LocalStateQuery protocol.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:answerQuery">answerQuery</a> &#8759; &#8704; blk result. RunNode blk &#8658; Protocol <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> blk (BlockProtocol blk) &#8594; <a href="Cardano-Tracing-Kernel.html#t:NodeKernel" title="Cardano.Tracing.Kernel">NodeKernel</a> <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Cardano-Tracing-Kernel.html#t:RemoteConnectionId" title="Cardano.Tracing.Kernel">RemoteConnectionId</a> <a href="Cardano-Tracing-Kernel.html#t:LocalConnectionId" title="Cardano.Tracing.Kernel">LocalConnectionId</a> blk &#8594; HardForkCompatQuery blk result &#8594; <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> result</li><li class="src short"><a href="#v:answerQueryWithLedgerState">answerQueryWithLedgerState</a> &#8759; &#8704; blk result. RunNode blk &#8658; Protocol <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> blk (BlockProtocol blk) &#8594; ExtLedgerState blk &#8594; HardForkCompatQuery blk result &#8594; result</li><li class="src short"><span class="keyword">type</span> <a href="#t:InterpreterQuery">InterpreterQuery</a> a = Qry a</li><li class="src short"><a href="#v:qryEpochStartTimeOfSlot">qryEpochStartTimeOfSlot</a> &#8759; <a href="file:///home/runner/work/cardano-node/cardano-node/dist/build/x86_64-linux/ghc-8.10.2/cardano-api-1.24.2/noopt/doc/html/cardano-api/Cardano-Api-Block.html#t:SlotNo" title="Cardano.Api.Block">SlotNo</a> &#8594; <a href="Cardano-Node-Query.html#t:InterpreterQuery" title="Cardano.Node.Query">InterpreterQuery</a> RelativeTime</li><li class="src short"><a href="#v:getEpochStartTimeOfSlot">getEpochStartTimeOfSlot</a> &#8759; &#8704; blk. RunNode blk &#8658; Protocol <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> blk (BlockProtocol blk) &#8594; <a href="Cardano-Tracing-Kernel.html#t:NodeKernel" title="Cardano.Tracing.Kernel">NodeKernel</a> <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Cardano-Tracing-Kernel.html#t:RemoteConnectionId" title="Cardano.Tracing.Kernel">RemoteConnectionId</a> <a href="Cardano-Tracing-Kernel.html#t:LocalConnectionId" title="Cardano.Tracing.Kernel">LocalConnectionId</a> blk &#8594; <a href="file:///home/runner/work/cardano-node/cardano-node/dist/build/x86_64-linux/ghc-8.10.2/cardano-api-1.24.2/noopt/doc/html/cardano-api/Cardano-Api-Block.html#t:SlotNo" title="Cardano.Api.Block">SlotNo</a> &#8594; <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/Cabal-3.2.0.0/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> PastHorizonException <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/time-1.9.3/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a>)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:answerQuery" class="def">answerQuery</a> &#8759; &#8704; blk result. RunNode blk &#8658; Protocol <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> blk (BlockProtocol blk) &#8594; <a href="Cardano-Tracing-Kernel.html#t:NodeKernel" title="Cardano.Tracing.Kernel">NodeKernel</a> <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Cardano-Tracing-Kernel.html#t:RemoteConnectionId" title="Cardano.Tracing.Kernel">RemoteConnectionId</a> <a href="Cardano-Tracing-Kernel.html#t:LocalConnectionId" title="Cardano.Tracing.Kernel">LocalConnectionId</a> blk &#8594; HardForkCompatQuery blk result &#8594; <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> result <a href="src/Cardano.Node.Query.html#answerQuery" class="link">Source</a> <a href="#v:answerQuery" class="selflink">#</a></p><div class="doc"><p>Answer a general query about the current ledger state of the running node.</p></div></div><div class="top"><p class="src"><a id="v:answerQueryWithLedgerState" class="def">answerQueryWithLedgerState</a> &#8759; &#8704; blk result. RunNode blk &#8658; Protocol <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> blk (BlockProtocol blk) &#8594; ExtLedgerState blk &#8594; HardForkCompatQuery blk result &#8594; result <a href="src/Cardano.Node.Query.html#answerQueryWithLedgerState" class="link">Source</a> <a href="#v:answerQueryWithLedgerState" class="selflink">#</a></p><div class="doc"><p>Answer a general query about the given ledger state.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:InterpreterQuery" class="def">InterpreterQuery</a> a = Qry a <a href="src/Cardano.Node.Query.html#InterpreterQuery" class="link">Source</a> <a href="#t:InterpreterQuery" class="selflink">#</a></p><div class="doc"><p>To avoid confusing <code>Qry</code> with <code><a href="HF.html#v:Query" title="HF">Query</a></code> and 'HF.HardForkCompatQuery,
 we introduce a type synonym for the former which we can use in docstrings
 (and type signatures, of course).</p><ul><li><code>Qry</code> (and thus <code><a href="Cardano-Node-Query.html#t:InterpreterQuery" title="Cardano.Node.Query">InterpreterQuery</a></code>) is a query about slots<em>epochs</em>time
   that a <code><a href="HF.html#v:Interpreter" title="HF">Interpreter</a></code> can answer.</li><li><code>Query</code> and <code>HardForkCompatQuery</code> are more general queries
   that can ask for anything related to the ledger state.</li></ul></div></div><div class="top"><p class="src"><a id="v:qryEpochStartTimeOfSlot" class="def">qryEpochStartTimeOfSlot</a> &#8759; <a href="file:///home/runner/work/cardano-node/cardano-node/dist/build/x86_64-linux/ghc-8.10.2/cardano-api-1.24.2/noopt/doc/html/cardano-api/Cardano-Api-Block.html#t:SlotNo" title="Cardano.Api.Block">SlotNo</a> &#8594; <a href="Cardano-Node-Query.html#t:InterpreterQuery" title="Cardano.Node.Query">InterpreterQuery</a> RelativeTime <a href="src/Cardano.Node.Query.html#qryEpochStartTimeOfSlot" class="link">Source</a> <a href="#v:qryEpochStartTimeOfSlot" class="selflink">#</a></p><div class="doc"><p>Return the start time of the epoch of the given slot.</p></div></div><div class="top"><p class="src"><a id="v:getEpochStartTimeOfSlot" class="def">getEpochStartTimeOfSlot</a> &#8759; &#8704; blk. RunNode blk &#8658; Protocol <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> blk (BlockProtocol blk) &#8594; <a href="Cardano-Tracing-Kernel.html#t:NodeKernel" title="Cardano.Tracing.Kernel">NodeKernel</a> <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Cardano-Tracing-Kernel.html#t:RemoteConnectionId" title="Cardano.Tracing.Kernel">RemoteConnectionId</a> <a href="Cardano-Tracing-Kernel.html#t:LocalConnectionId" title="Cardano.Tracing.Kernel">LocalConnectionId</a> blk &#8594; <a href="file:///home/runner/work/cardano-node/cardano-node/dist/build/x86_64-linux/ghc-8.10.2/cardano-api-1.24.2/noopt/doc/html/cardano-api/Cardano-Api-Block.html#t:SlotNo" title="Cardano.Api.Block">SlotNo</a> &#8594; <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/Cabal-3.2.0.0/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> PastHorizonException <a href="file:///opt/ghc/8.10.2/share/doc/ghc-8.10.2/html/libraries/time-1.9.3/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a>) <a href="src/Cardano.Node.Query.html#getEpochStartTimeOfSlot" class="link">Source</a> <a href="#v:getEpochStartTimeOfSlot" class="selflink">#</a></p><div class="doc"><p>Execute the <code><a href="Cardano-Node-Query.html#v:qryEpochStartTimeOfSlot" title="Cardano.Node.Query">qryEpochStartTimeOfSlot</a></code> <code><a href="Cardano-Node-Query.html#t:InterpreterQuery" title="Cardano.Node.Query">InterpreterQuery</a></code> against the
 current ledger state.</p><p>Will return a <code><a href="HF.html#v:PastHorizonException" title="HF">PastHorizonException</a></code> when the current chain doesn't give
 us enough information about the given slot. For example, when syncing from
 scratch, we don't know yet when the transition to Shelley will happen, so we
 can't do conversions for slots from the Shelley era.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>